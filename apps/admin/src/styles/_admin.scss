/**
 * KlimaOslo Kartadmin - Admin-spesifikke stiler
 * Bruker Punkt designsystem variabler
 */

@use "sass:map";
@use "@oslokommune/punkt-css/dist/scss/abstracts/variables" as pkt;
@use "@oslokommune/punkt-css/dist/scss/abstracts/mixins/breakpoints" as *;
@use "@oslokommune/punkt-css/dist/scss/abstracts/mixins/typography" as *;

// CSS custom properties for enklere bruk
:root {
  // Primaerfarger fra Punkt
  --color-primary: #{map.get(pkt.$pkt-colors, "brand-dark-blue-1000")};
  --color-primary-hover: #{map.get(pkt.$pkt-colors, "brand-warm-blue-1000")};
  --color-accent: #{map.get(pkt.$pkt-colors, "brand-dark-green-1000")};
  --color-accent-hover: #{map.get(pkt.$pkt-colors, "brand-green-1000")};
  --color-danger: #{map.get(pkt.$pkt-colors, "brand-red-1000")};
  --color-success: #{map.get(pkt.$pkt-colors, "brand-green-1000")};
  --color-warning: #{map.get(pkt.$pkt-colors, "brand-yellow-1000")};

  --color-text: #{map.get(pkt.$pkt-colors, "brand-dark-blue-1000")}; // #2a2859 - Punkt standard
  --color-text-muted: #{map.get(pkt.$pkt-colors, "brand-dark-blue-700")}; // #6a698b - Punkt standard for sekundær tekst
  --color-background: #{map.get(pkt.$pkt-colors, "white")};
  --color-surface: #{map.get(pkt.$pkt-colors, "white")};
  --color-border: #{map.get(pkt.$pkt-colors, "grays-gray-200")};

  // Spacing - matcher Punkt spacing scale
  --pkt-spacing-2: #{map.get(pkt.$spacing, "size-2")};
  --pkt-spacing-4: #{map.get(pkt.$spacing, "size-4")};
  --pkt-spacing-8: #{map.get(pkt.$spacing, "size-8")};
  --pkt-spacing-12: #{map.get(pkt.$spacing, "size-12")};
  --pkt-spacing-16: #{map.get(pkt.$spacing, "size-16")};
  --pkt-spacing-24: #{map.get(pkt.$spacing, "size-24")};
  --pkt-spacing-32: #{map.get(pkt.$spacing, "size-32")};
  --pkt-spacing-40: #{map.get(pkt.$spacing, "size-40")};
}

/* Reset */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--pkt-font-family, 'Oslo Sans', Arial, sans-serif);
  color: var(--color-text);
  background-color: var(--color-background);
  line-height: 1.5;
}

/* Layout */
.layout {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--pkt-spacing-12) var(--pkt-spacing-24);
  background-color: var(--color-surface);
  border-bottom: 2px solid var(--color-primary);
}

.header-left {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-16);
}

.header-left h1 {
  @include get-text("pkt-txt-24-medium");
  color: var(--color-primary);
}

.dev-badge {
  @include get-text("pkt-txt-12-medium");
  background-color: var(--color-warning);
  color: var(--color-text);
  padding: #{map.get(pkt.$spacing, "size-2")} var(--pkt-spacing-8);
  margin-left: var(--pkt-spacing-8);
}

.header-right {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-16);
}

.user-name {
  color: var(--color-text-muted);
}

.logo img {
  height: 80px;
}

.nav {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-16);
  padding: var(--pkt-spacing-16) var(--pkt-spacing-24);
  background-color: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
}

.nav-right {
  margin-left: auto;
}

.nav-link {
  color: var(--color-text);
  text-decoration: none;
  padding: var(--pkt-spacing-8) var(--pkt-spacing-16);
  font-weight: 500;
  transition: color 0.2s;

  &:hover {
    color: var(--color-primary);
  }
}

.main {
  flex: 1;
  padding: var(--pkt-spacing-24);
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
}

.footer {
  padding: var(--pkt-spacing-16) var(--pkt-spacing-24);
  text-align: center;
  color: var(--color-text-muted);
  border-top: 1px solid var(--color-border);
  background-color: var(--color-surface);
}

/* Login Page */
.login-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-background);
}

.login-container {
  text-align: center;
  padding: var(--pkt-spacing-32);
  background-color: var(--color-surface);
  box-shadow: #{map.get(pkt.$box-shadow, "medium")};
  max-width: 400px;
}

.login-logo {
  height: 80px;
  margin-bottom: var(--pkt-spacing-24);
}

.login-container h1 {
  margin-bottom: var(--pkt-spacing-16);
  color: var(--color-primary);
}

.login-container p {
  margin-bottom: var(--pkt-spacing-24);
  color: var(--color-text-muted);
}

/* Dashboard */
.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--pkt-spacing-24);
}

.kartinstanser-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--pkt-spacing-24);
}

.kartinstans-card {
  background-color: var(--color-surface);
  padding: var(--pkt-spacing-24);
  box-shadow: #{map.get(pkt.$box-shadow, "small")};
  border-left: 4px solid var(--color-primary);

  h3 {
    margin-bottom: var(--pkt-spacing-8);
    color: var(--color-primary);
  }
}

.card-meta {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
  margin-bottom: var(--pkt-spacing-8);
}

.card-user-info {
  margin-bottom: var(--pkt-spacing-16);
  padding: var(--pkt-spacing-8) 0;
  border-top: 1px solid var(--color-border);
}

.user-info-row {
  @include get-text("pkt-txt-14");
  display: flex;
  gap: var(--pkt-spacing-8);
  margin-bottom: var(--pkt-spacing-4);

  &:last-child {
    margin-bottom: 0;
  }
}

.user-info-label {
  color: var(--color-text-muted);
  min-width: 100px;
}

.user-info-value {
  color: var(--color-text);
}

.card-actions {
  display: flex;
  gap: var(--pkt-spacing-8);
}

/* Delete button */
.delete-button {
  @include get-text("pkt-txt-14-medium");
  display: inline-flex;
  align-items: center;
  gap: var(--pkt-spacing-4);
  margin-top: var(--pkt-spacing-24); // Mer avstand opp til andre elementer
  padding: 0;
  color: var(--color-primary);
  background: none;
  border: none;
  cursor: pointer;
  text-decoration: underline;

  &:hover {
    color: var(--color-primary-hover);
  }
}

.delete-icon {
  width: 16px;
  height: 16px;
  color: var(--color-danger);
}

/* Forms */
.form-section {
  background-color: var(--color-surface);
  padding: var(--pkt-spacing-24);
  margin-bottom: var(--pkt-spacing-24);
  box-shadow: #{map.get(pkt.$box-shadow, "small")};
}

.form-section h3 {
  margin-bottom: var(--pkt-spacing-16);
  color: var(--color-primary);
}

.section-title {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
}

.section-icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--pkt-spacing-16);
}

.section-description {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
  margin-bottom: var(--pkt-spacing-16);
}

.form-group {
  margin-bottom: var(--pkt-spacing-16);
}

.form-group label {
  display: block;
  margin-bottom: var(--pkt-spacing-4);
  font-weight: 500;
}

.form-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--pkt-spacing-16);
}

.form-actions {
  display: flex;
  gap: var(--pkt-spacing-16);
  justify-content: flex-end;
  margin-top: var(--pkt-spacing-24);
}

/* Kategorier */
.kategorier-list {
  display: flex;
  flex-direction: column;
  gap: var(--pkt-spacing-8);
}

.kategori-row {
  display: flex;
  gap: var(--pkt-spacing-16);
  align-items: center;
  padding: var(--pkt-spacing-8);
  background-color: var(--color-background);
}

.kategori-color-picker {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
  min-width: 180px;

  .color-preview {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .pkt-inputwrapper {
    flex: 1;
  }

  // Skjul label visuelt
  .pkt-inputwrapper label {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}

.kategori-name-input {
  flex: 1;
}

/* Tips */
.tips-oversikt h2 {
  margin-bottom: var(--pkt-spacing-24);
}

.tips-badge {
  @include get-text("pkt-txt-14");
  display: inline-block;
  background-color: var(--color-danger);
  color: white;
  padding: var(--pkt-spacing-4) var(--pkt-spacing-8);
  margin-bottom: var(--pkt-spacing-16);
}

.tips-filters {
  display: flex;
  gap: var(--pkt-spacing-8);
  margin-bottom: var(--pkt-spacing-24);
}

.tips-list {
  display: flex;
  flex-direction: column;
  gap: var(--pkt-spacing-16);
}

.tips-card {
  background-color: var(--color-surface);
  padding: var(--pkt-spacing-24);
  box-shadow: #{map.get(pkt.$box-shadow, "small")};
}

.tips-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--pkt-spacing-16);
  padding-bottom: var(--pkt-spacing-8);
  border-bottom: 1px solid var(--color-border);
}

.tips-date {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
}

.tips-content p {
  margin-bottom: var(--pkt-spacing-8);
}

.tips-actions {
  display: flex;
  gap: var(--pkt-spacing-8);
  margin-top: var(--pkt-spacing-16);
  padding-top: var(--pkt-spacing-16);
  border-top: 1px solid var(--color-border);
}

/* Loading and empty states */
.loading {
  text-align: center;
  padding: var(--pkt-spacing-32);
  color: var(--color-text-muted);
}

.empty-state {
  text-align: center;
  padding: var(--pkt-spacing-32);
  color: var(--color-text-muted);
}

.empty-hint {
  color: var(--color-text-muted);
  font-style: italic;
}

/* Steder-sok */
.steder-search {
  margin-bottom: var(--pkt-spacing-24);
}

.search-input-wrapper {
  display: flex;
  align-items: flex-start;
  gap: #{map.get(pkt.$spacing, "size-8")};
  margin-bottom: var(--pkt-spacing-4);

  > .pkt-button,
  > button {
    flex-shrink: 0;
  }
}

/* Admin søkefelt med ikon */
.admin-search-field {
  position: relative;
  flex: 1;
  display: flex;
  align-items: center;

  .admin-search-icon {
    position: absolute;
    left: #{map.get(pkt.$spacing, "size-12")};
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    color: var(--color-text-muted);
    pointer-events: none;
    z-index: 1;
  }

  .pkt-sr-only-label-wrapper {
    width: 100%;
  }

  // Legg til padding for ikonene (søkeikon venstre, tøm-knapp høyre)
  input[type="text"],
  .pkt-inputwrapper input {
    padding-left: #{map.get(pkt.$spacing, "size-40")} !important;
    padding-right: #{map.get(pkt.$spacing, "size-40")} !important;
  }
}

/* Tøm søkefelt-knapp */
.search-clear-button {
  position: absolute;
  right: #{map.get(pkt.$spacing, "size-8")};
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-text-muted);
  border-radius: 50%;
  transition: color 0.15s, background-color 0.15s;
  z-index: 2;

  &:hover {
    color: var(--color-primary);
    background-color: #{map.get(pkt.$pkt-colors, "brand-neutrals-200")};
  }

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

.search-clear-icon {
  width: 16px;
  height: 16px;
}

/* Autocomplete dropdown */
.search-autocomplete-container {
  position: relative;
  width: 400px; // Fast bredde slik at knappen ligger rett ved siden av
  max-width: 100%;
}

.autocomplete-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background-color: #ffffff;
  border: 2px solid var(--color-primary);
  border-top: none;
  box-shadow: #{map.get(pkt.$box-shadow, "medium")};
  max-height: 300px;
  overflow-y: auto;
  z-index: 1000;
}

.autocomplete-item {
  padding: var(--pkt-spacing-8) var(--pkt-spacing-16);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  gap: #{map.get(pkt.$spacing, "size-2")};
  border-bottom: 1px solid var(--color-border);
  background-color: #ffffff;

  &:last-child {
    border-bottom: none;
  }

  &:hover {
    background-color: #f9f9f9;
  }
}

.autocomplete-main {
  @include get-text("pkt-txt-14-medium");
  color: var(--color-text);
}

.autocomplete-secondary {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
}

.autocomplete-loading {
  padding: var(--pkt-spacing-8) var(--pkt-spacing-16);
  color: var(--color-text-muted);
  font-style: italic;
}

.search-hint {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
  margin-top: var(--pkt-spacing-4);
}

/* Sokeresultater */
.search-results {
  margin-bottom: var(--pkt-spacing-24);
}

.search-results h4 {
  margin-bottom: var(--pkt-spacing-16);
  color: var(--color-text);
}

.search-results-list {
  display: flex;
  flex-direction: column;
  gap: var(--pkt-spacing-8);
}

.search-result-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--pkt-spacing-16);
  background-color: var(--color-background);
  border: 1px solid var(--color-border);

  &.already-added {
    opacity: 0.6;
  }
}

.result-info {
  flex: 1;
}

.result-name {
  @include get-text("pkt-txt-14-medium");
  color: var(--color-text);
  margin-bottom: var(--pkt-spacing-4);
}

.result-address {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
}

.result-rating {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
  margin-top: var(--pkt-spacing-4);
}

.result-actions {
  display: flex;
  gap: var(--pkt-spacing-8);
  align-items: center;
}

.already-added-badge {
  @include get-text("pkt-txt-12-medium");
  background-color: var(--color-success);
  color: white;
  padding: var(--pkt-spacing-4) var(--pkt-spacing-8);
}

/* Eksisterende steder */
.existing-steder {
  margin-top: var(--pkt-spacing-24);
}

.existing-steder h4 {
  margin-bottom: var(--pkt-spacing-16);
  color: var(--color-text);
}

.steder-table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--color-surface);
  overflow: visible;

  th, td {
    padding: var(--pkt-spacing-16);
    text-align: left;
    border-bottom: 1px solid var(--color-border);
  }

  th {
    @include get-text("pkt-txt-14-medium");
    background-color: var(--color-background);
    color: var(--color-text-muted);
  }

  tbody tr:hover {
    background-color: var(--color-background);
  }
}

.sted-name {
  @include get-text("pkt-txt-14-medium");
  color: var(--color-text);
}

.sted-address {
  @include get-text("pkt-txt-14");
  color: var(--color-text-muted);
}

.kategori-badge {
  @include get-text("pkt-txt-12-medium");
  display: inline-block;
  padding: var(--pkt-spacing-4) var(--pkt-spacing-8);
  // Tekstfarge settes dynamisk i komponenten basert på bakgrunnsfarge
}

/* Klikkbar kategori-badge med dropdown */
.kategori-cell {
  position: relative;
}

.kategori-badge-button {
  @include get-text("pkt-txt-12-medium");
  display: inline-flex;
  align-items: center;
  gap: var(--pkt-spacing-4);
  padding: var(--pkt-spacing-4) var(--pkt-spacing-8);
  border: none;
  cursor: pointer;
  transition: opacity 0.2s, transform 0.1s;

  &:hover {
    opacity: 0.9;
  }

  &:active {
    transform: scale(0.98);
  }

  &:disabled {
    cursor: wait;
    opacity: 0.7;
  }
}

.kategori-chevron {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  opacity: 0.8;
}

.kategori-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: var(--pkt-spacing-4);
  min-width: 180px;
  background-color: #ffffff;
  border: 2px solid var(--color-primary);
  box-shadow: #{map.get(pkt.$box-shadow, "medium")};
  z-index: 9999;
}

.kategori-dropdown-item {
  @include get-text("pkt-txt-14");
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
  width: 100%;
  padding: var(--pkt-spacing-8) var(--pkt-spacing-16);
  border: none;
  background-color: #ffffff;
  cursor: pointer;
  text-align: left;
  transition: background-color 0.15s;

  &:hover {
    background-color: #f5f5f5;
  }

  &.active {
    background-color: #f0f7ff;
  }

  &:not(:last-child) {
    border-bottom: 1px solid var(--color-border);
  }
}

.kategori-dropdown-color {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  flex-shrink: 0;
}

.kategori-check {
  width: 16px;
  height: 16px;
  margin-left: auto;
  color: var(--color-success);
}

/* Checkbox-basert kategori-dropdown for fler-kategori støtte */
.kategori-checkbox-dropdown {
  position: relative;
}

.kategori-checkbox-toggle {
  @include get-text("pkt-txt-14");
  display: inline-flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
  padding: var(--pkt-spacing-8) var(--pkt-spacing-12);
  background-color: #ffffff;
  border: 2px solid var(--color-border);
  cursor: pointer;
  transition: border-color 0.15s;
  min-width: 150px;

  &:hover {
    border-color: var(--color-primary);
  }

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

.kategori-toggle-text {
  color: var(--color-text-muted);
}

.kategori-toggle-dots {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-4);
}

.kategori-dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  flex-shrink: 0;
}

.kategori-more {
  @include get-text("pkt-txt-12-medium");
  color: var(--color-text-muted);
}

.kategori-checkbox-list {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: var(--pkt-spacing-4);
  min-width: 200px;
  background-color: #ffffff;
  border: 2px solid var(--color-primary);
  box-shadow: #{map.get(pkt.$box-shadow, "medium")};
  z-index: 9999;
  max-height: 250px;
  overflow-y: auto;
}

.kategori-checkbox-item {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
  padding: var(--pkt-spacing-8) var(--pkt-spacing-16);
  cursor: pointer;
  transition: background-color 0.15s;

  &:hover {
    background-color: #f5f5f5;
  }

  &:not(:last-child) {
    border-bottom: 1px solid var(--color-border);
  }

  // Juster checkbox-margin
  .pkt-form-checkbox {
    margin: 0;
  }

  .pkt-form-checkbox input {
    margin: 0;
  }
}

.kategori-checkbox-name {
  @include get-text("pkt-txt-14");
  color: var(--color-text);
}

/* Embed-kode seksjon */
.embed-section {
  background-color: var(--color-surface);
}

.embed-intro {
  color: var(--color-text-muted);
  margin-bottom: var(--pkt-spacing-24);
}

.embed-code-container,
.embed-link-container {
  margin-bottom: var(--pkt-spacing-24);
}

.embed-code-container label,
.embed-link-container label {
  display: block;
  font-weight: 500;
  margin-bottom: var(--pkt-spacing-8);
}

.embed-code-wrapper,
.embed-link-wrapper {
  display: flex;
  gap: var(--pkt-spacing-8);
  align-items: stretch;
}

.embed-code {
  @include get-text("pkt-txt-14");
  flex: 1;
  background-color: #1e1e1e;
  color: #d4d4d4;
  padding: var(--pkt-spacing-16);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-all;
  margin: 0;
}

.embed-link-input {
  @include get-text("pkt-txt-14");
  flex: 1;
  padding: var(--pkt-spacing-8) var(--pkt-spacing-16);
  border: 2px solid var(--color-border);
  background-color: var(--color-background);
  color: var(--color-text);

  &:focus {
    outline: none;
    border-color: var(--color-primary);
  }
}

.copy-button {
  min-width: 120px;
  white-space: nowrap;

  &.copied {
    background-color: var(--color-success) !important;
    border-color: var(--color-success) !important;
    color: white !important;
  }
}

/* Embed-alternativer */
.embed-options {
  background-color: var(--color-background);
  padding: var(--pkt-spacing-16);
  margin-bottom: var(--pkt-spacing-24);
}

/* Avanserte innstillinger - underseksjon */
.avanserte-innstillinger {
  margin-top: var(--pkt-spacing-24);
  padding-top: var(--pkt-spacing-24);
  border-top: 1px solid var(--color-border);

  h3 {
    margin-bottom: var(--pkt-spacing-16);
    color: var(--color-primary);
  }
}

.embed-option-row {
  margin-bottom: var(--pkt-spacing-8);

  &:last-child {
    margin-bottom: 0;
  }
}

.embed-preview-link {
  margin-top: var(--pkt-spacing-16);
}

.embed-preview-link a {
  display: inline-flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
}

/* Editor header with back button */
.editor-header {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-bottom: var(--pkt-spacing-16);
}

/* Editor header */
.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--pkt-spacing-16);
  margin-bottom: var(--pkt-spacing-24);
}

/* Editable title */
.editable-title {
  flex: 1;
}

.title-display-wrapper {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);

  h2 {
    margin: 0;
  }
}

.title-edit-wrapper {
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
}

.title-input {
  border: none;
  border-bottom: 2px solid var(--color-primary);
  background: transparent;
  padding: var(--pkt-spacing-4) 0;
  min-width: 300px;
  color: var(--color-text);

  &:focus {
    outline: none;
    border-bottom-color: var(--color-accent);
  }

  &::placeholder {
    color: var(--color-text-muted);
  }
}

/* New kartinstans action buttons */
.new-kart-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--pkt-spacing-16);
  padding: var(--pkt-spacing-24);
  background-color: var(--color-surface);
  box-shadow: #{map.get(pkt.$box-shadow, "small")};
}

/* Floating action panel */
.floating-action-panel {
  position: fixed;
  bottom: var(--pkt-spacing-24);
  right: var(--pkt-spacing-24);
  z-index: 1000;
  background-color: #ffffff;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  padding: var(--pkt-spacing-16) var(--pkt-spacing-24);
  border: 1px solid var(--color-border);
  border-left: 4px solid var(--color-primary);
  min-width: 420px;
  min-height: 90px;
  display: flex;
  align-items: center;
  animation: slideIn 0.3s ease-out;

  &.success {
    animation: none;
  }
}

@keyframes slideIn {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.floating-action-content {
  display: flex;
  flex-direction: column;
  gap: var(--pkt-spacing-16);
}

.changes-count {
  @include get-text("pkt-txt-14-medium");
  color: var(--color-primary);
}

.save-success-message {
  @include get-text("pkt-txt-14-medium");
  display: flex;
  align-items: center;
  gap: var(--pkt-spacing-8);
  color: var(--color-text);
}

.success-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  color: var(--color-primary);
}

.floating-action-buttons {
  display: flex;
  gap: var(--pkt-spacing-8);
  flex-wrap: wrap;

  // Prevent button resize when text changes to "Lagrer..."
  .pkt-btn {
    min-width: 120px;
  }
}

/* Utility class to visually hide labels but keep for accessibility */
.pkt-sr-only-label-wrapper {
  .pkt-inputwrapper label,
  .pkt-form-group > label {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}

/* Delete confirmation dialog */
.kartinstans-card {
  position: relative;
}

.delete-confirm-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--pkt-spacing-16);
  z-index: 10;
}

.delete-confirm-dialog {
  text-align: center;
  max-width: 280px;

  p {
    margin-bottom: var(--pkt-spacing-8);
    color: var(--color-text);
    font-weight: 500;
  }

  .delete-warning {
    @include get-text("pkt-txt-14");
    color: var(--color-danger);
    margin-bottom: var(--pkt-spacing-16);
  }
}

.delete-confirm-actions {
  display: flex;
  gap: var(--pkt-spacing-8);
  justify-content: center;
}

/* Tips search panel */
.tips-search-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--pkt-spacing-24);
}

.tips-search-panel {
  background-color: #ffffff;
  width: 100%;
  max-width: 700px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: #{map.get(pkt.$box-shadow, "large")};
  padding: var(--pkt-spacing-24);
}

.tips-search-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--pkt-spacing-24);
  padding-bottom: var(--pkt-spacing-16);
  border-bottom: 2px solid var(--color-primary);

  h3 {
    margin: 0;
  }
}

.tips-search-info {
  background-color: var(--color-background);
  padding: var(--pkt-spacing-16);
  margin-bottom: var(--pkt-spacing-24);

  p {
    margin-bottom: var(--pkt-spacing-4);

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.tips-search-field {
  margin-bottom: var(--pkt-spacing-24);

  .search-autocomplete-container {
    flex: 1;
  }
}

.tips-search-results {
  margin-bottom: var(--pkt-spacing-24);

  h4 {
    margin-bottom: var(--pkt-spacing-16);
  }

  .search-result-item.clickable {
    cursor: pointer;
    transition: background-color 0.15s;

    &:hover {
      background-color: #f0f7ff;
    }
  }
}

.tips-selected-place {
  background-color: #f0fff4;
  border: 2px solid var(--color-success);
  padding: var(--pkt-spacing-24);

  h4 {
    margin-bottom: var(--pkt-spacing-16);
    color: var(--color-success);
  }
}

.selected-place-info {
  margin-bottom: var(--pkt-spacing-16);

  p {
    margin-bottom: var(--pkt-spacing-4);

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.tips-category-select {
  margin-bottom: var(--pkt-spacing-24);
  max-width: 300px;
}

.tips-approve-actions {
  display: flex;
  gap: var(--pkt-spacing-16);
  justify-content: flex-end;
  padding-top: var(--pkt-spacing-16);
  border-top: 1px solid var(--color-border);
}

// ===========================================
// Responsiv design
// Bruker Punkt breakpoints:
// - mobile: 0 til 575px
// - phablet: 576px til 767px
// - tablet: 768px til 1023px
// - tablet-big: 1024px til 1279px
// - laptop: 1280px til 1599px
// - desktop: 1600px og opp
// ===========================================

// Mobil-layout (opp til 575px)
@include bp('mobile') {
  .header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--pkt-spacing-8);
  }

  .header-left {
    width: 100%;

    h1 {
      font-size: 1rem;
    }
  }

  .header-right {
    width: 100%;
    justify-content: space-between;
  }

  .nav {
    flex-wrap: wrap;
  }

  .main {
    padding: var(--pkt-spacing-16);
  }

  .dashboard-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--pkt-spacing-16);
  }

  .kartinstanser-grid {
    grid-template-columns: 1fr;
  }

  .editor-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .title-input {
    min-width: 100%;
  }

  .search-autocomplete-container {
    width: 100%;
  }

  .search-input-wrapper {
    flex-direction: column;

    > .pkt-button,
    > button {
      width: 100%;
    }
  }

  .result-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .steder-table {
    display: block;
    overflow-x: auto;
  }

  .embed-code-wrapper,
  .embed-link-wrapper {
    flex-direction: column;
  }

  .floating-action-panel {
    left: var(--pkt-spacing-16);
    right: var(--pkt-spacing-16);
    min-width: auto;
  }

  .floating-action-buttons {
    flex-direction: column;

    .pkt-btn {
      width: 100%;
    }
  }

  .tips-filters {
    flex-wrap: wrap;
  }

  .tips-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--pkt-spacing-8);
  }

  .tips-actions {
    flex-direction: column;
  }
}

// Phablet (576px til 767px)
@include bp('phablet') {
  .kartinstanser-grid {
    grid-template-columns: 1fr;
  }

  .search-autocomplete-container {
    width: 100%;
  }
}

// Tablet og opp (768px+)
@include bp('tablet-up') {
  .kartinstanser-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }

  .search-autocomplete-container {
    width: 400px;
  }
}

// Laptop og opp (1280px+)
@include bp('laptop-up') {
  .main {
    max-width: 1400px;
  }
}
